      Program CPYSP
C     Program to read in one spectrum and transfer masking keys
C     from a second spectrum. Write output to new spectrum.
      IMPLICIT DOUBLE PRECISION (A-H,O-Z)
      COMMON /CA/ OFL(200000),OWL(200000),WT(200000)
      DATA IN1,IN2,NOUT1/1,2,3/
	CHARACTER * 4 KY
  101 FORMAT (F13.2,1PE13.5,1PE13.5)
  102 FORMAT (F13.2,1PE13.5,1PE13.5,A4)
      OPEN ( UNIT = IN1,   FILE = 'D:\CVSYSTEMS\V3885SGR\OBSCLEANX.DAT',  
     $STATUS = 'OLD')
      OPEN ( UNIT = IN2,   FILE = 'D:\CVSYSTEMS\V3885SGR\OBSCLEANA.DAT',  
     $STATUS = 'OLD')
      OPEN ( UNIT = NOUT1, FILE = 'D:\CVSYSTEMS\V3885SGR\REPLACE.DAT',  
     $STATUS = 'REPLACE')
	DO J=1,200000
		READ (IN1, 101, END=1, ERR=90) OWL(J),OFL(J),WT(J)
	END DO
	CALL PMDSTOP
    1 CONTINUE
	DO J=1,200000
		READ (IN2, 102, END=2, ERR=91) WL,FX,W,KY
		IF (WL.NE.OWL(J)) CALL PMDSTOP
		WRITE (NOUT1, 102) OWL(J),OFL(J),WT(J),KY
	END DO
	CALL PMDSTOP
    2 CONTINUE
   90 STOP
   91 STOP
	END